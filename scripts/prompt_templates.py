import gradio as gr

def create_prompt_template_ui():
    """创建包含所有关键词辅助模板的UI组件"""
    
    # 移除了外层的Accordion定义，只保留内部的Tabs和各个模板组件
    with gr.Tabs():
        # 表情包模板
        with gr.Tab("表情包"):
            expression_template = gr.TextArea(
                value="""一组角色表情变化的图片，同一个角色在不同情绪状态下的表现。日系动漫风格。

发型：角色的发型是短发，发色为深棕色，发型略显凌乱。

面部特征：角色的眼睛大而有神，眉毛粗而有力，鼻梁挺拔，脸颊红润。

表情变化：
- 愤怒：眉毛紧锁，眼睛瞪大，露出牙齿
- 惊讶：眼睛睁大，嘴巴微张，眉毛上扬
- 严肃：眉毛微皱，眼睛半睁，嘴巴紧闭
- 平静：眉毛放松，眼睛平静，嘴巴自然
- 困惑：眉毛上扬，眼睛微睁，嘴巴微张
- 悲伤：眼睛微闭，嘴巴紧闭，脸颊泛红
- 坚定：眉毛紧锁，眼睛半睁，嘴巴紧闭""",
                lines=15,
                interactive=True
            )

        # 创作故事模板
        with gr.Tab("创作故事"):
            story_template = gr.TextArea(
                value="""请根据以下模板，为您的AI绘画作品创作一个故事：

故事名称： [在这里填写故事名称]

主要角色： [描述主要角色，例如：一位孤独的宇航员，]

背景设定： [描述故事发生的地点和时间，例如：遥远的未来，一个被遗忘的星球；]

故事情节：
1. 开端： [引入主要角色和背景，设置故事的起点]
2. 发展： [描述事件的发生，角色的行动和遇到的挑战]
3. 高潮： [故事中最紧张或最激动人心的部分，冲突达到顶点]
4. 结局： [故事的解决和角色的最终命运]

作品主题： [故事想要表达的核心思想或情感，例如：勇气、友谊、探索、失落]

关键词/灵感来源： [可以是一些关键词、短语或启发您创作的图片、音乐等]

希望AI绘画呈现的画面： [描述您希望AI根据故事内容生成画面的具体细节，例如：宇航员在星空中漂浮，周围是闪烁的星云；]""",
                lines=20,
                interactive=True
            )
            
        # 分镜描写
        with gr.Tab("分镜描写"):
            shot_template = gr.TextArea(
                value="""第一格：
- 场景：昏暗房间内部
- 人物：地上昏迷者 + 椎子上的男人
- 布局：左侧躺地上，右侧坐椅子
- 道具：书本或文件
- 氛围：压抑不安，暗示暴力。

第二格：
- 视角：地上人物特写
- 表情：痛苦、喘息、呻吟
- 细节：紧闭双眼、额头汗水
- 氛围：强化紧张和痛苦。

第三格：
- 视角：坐姿男人特写
- 表情：惊讶、困惑、担忧
- 细节：眉头紧锁、嘴角下垂
- 氛围：内心波动、故事悬念。""",
                lines=15,
                interactive=True
            )

        # 分镜视觉呈现参考
        with gr.Tab("分镜视觉呈现参考"):
            gr.Markdown("""### 分镜常用视觉呈现
分镜类关键词主要用于描述和指导影视、动画、漫画等作品的视觉呈现和叙事结构。

#### 镜头属性
- **镜头编号**：标识每个镜头的顺序，如镜头1、SC1
- **景别**：
  • 远景：展现广阔场景，交代环境
  • 全景：展示人物全身及周围环境
  • 中景：表现人物膝盖以上部分，常用于对话
  • 近景：腰部以上，突出人物表情和动作
  • 特写：聚焦面部或物体细节，强化情感
  • 大特写：极端细节，如眼睛、嘴唇等

#### 镜头角度
- 平视：与人物视线齐平，自然真实
- 俯视：从高处向下拍摄，展现全局或弱势
- 仰视：从低处向上拍摄，突出力量或威严

#### 镜头运动
- 推镜头：镜头向前移动，聚焦主体
- 拉镜头：镜头向后移动，展示环境
- 摇镜头：镜头左右或上下旋转，扫描场景
- 移镜头：镜头平行移动，跟随或展示动态
- 跟镜头：持续跟随运动主体

#### 焦距效果
- 长焦：压缩空间，突出主体，虚化背景
- 广角：扩展视野，展现更多环境，增强透视感

#### 画面构图
- 三分法：将画面分为九宫格，重要元素置于交点
- 对称构图：营造平衡与稳定
- 对角线构图：增强动感
- S形构图：富有韵律，引导视线
- 空间层次：利用前景、中景、背景丰富画面深度""")

        # 海报设计模板
        with gr.Tab("海报设计"):
            poster_template = gr.TextArea(
                value="""电商海报设计模板:
# 主体
[产品/人物名称]：[详细描述，如"一位未来感机器人手持发光饮料瓶"]
主体占比：60%-70%画面（突出视觉焦点）

# 背景
风格：[科技感/霓虹灯/极简/自然风景] + [颜色基调，如"紫蓝色渐变"]
元素：[附加装饰，如"漂浮的几何图形/粒子光效/抽象线条"]

# 文字区域
预留空间：顶部30%或底部20%（用于添加文案）
文字特效：[发光/金属质感/霓虹灯/故障艺术]""",
                lines=15,
                interactive=True
            )

        # 三视图模板
        with gr.Tab("三视图"):
            three_view_template = gr.TextArea(
                value="""漫画风格，一个穿着街头风格服装的男人，蓝白相间的配色方案。服装包括连帽衫、裤子、运动鞋。

装备：背包、佩戴耳机。

三视图全身展示：前、侧、后。

设计元素：
上身印着涂鸦图案，这是游戏中的角色。""",
                lines=12,
                interactive=True
            )

        # 艺术风格参考
        with gr.Tab("艺术风格"):
            gr.Markdown("""## 常用艺术风格参考

# 现代艺术风格
- 科幻风格：搭配烟雾、激光效果
- 赛博朋克：未来科技感
- 概念艺术：适合原画创作
- 超现实主义：梦幻想象
- 未来主义：前卫创新
- 波普艺术：大众文化
- 抽象表现主义：情感表达
- 当代艺术：现代创新

# 传统艺术风格
- 达芬奇风格：文艺复兴代表
- 日本浮世绘：东方美学
- 中国国画：水墨意境
- 古希腊艺术：典雅庄重
- 巴洛克式：华丽装饰
- 文艺复兴：人文主义
- 古典主义：严谨均衡

# 绘画技法风格
- 油画：丰富质感
- 水彩画：轻盈通透
- 水墨画：东方韵味
- 手稿：随性写生
- 像素艺术：复古风格

# 商业艺术风格
- 迪士尼风格：温馨可爱
- 皮克斯风格：精致3D
- 插画风格：图文结合
- 数字插画：现代技术
- 包豪斯风格：简约实用（苹果设计灵感）

# 动漫与漫画风格
- 日本漫画：二次元风格
- 美漫风格：漫画封面
- 动画风格：动态表现
- WW3风格：绚丽动画

# 专业艺术流派
- 印象派：光影氛围
- 后印象派：主观表达
- 野兽派：强烈色彩
- 立体主义：几何分解
- 光色主义：光影渲染
- 表现主义：情感突出

# 特殊风格效果
- 黑暗风格：氛围营造
- 黑暗幻想：配合金属质感
- 蒸汽朋克：复古科技
- 微缩模型：精致场景
- 动作镜头：动态表现

# 写实与纪实
- 写实主义：真实再现
- 现实主义：客观描绘
- 批判现实主义：社会反思
- 纪实风格：真实记录""")

        # 自然现象参考
        with gr.Tab("自然现象"):
            gr.Markdown("""## 自然现象参考

# 大气现象
- 烟雾效果
  • 黑色烟雾（可替换其他颜色）
  • 柔和的雾
  • 薄雾
  • 水汽

- 云层变化
  • 云朵
  • 膨胀的云
  • 引人注目的云

# 天气现象
- 暴风雨系列
  • 暴风雨场景
  • 暴风雨的海面
  • 闪电

- 光照效果
  • 落日
  • 日出
  • 彩虹
  • 光环
  • 发光现象

# 地理景观
- 水域景观
  • 海洋背景
  • 瀑布
  • 浪花白色泡沫

- 地形特征
  • 冰河
  • 深渊
  • 自然风景

# 动态效果
- 自然运动
  • 旋转的尘埃
  • 阴暗的天
  • 水汽流动""")

        # 材质参考
        with gr.Tab("材质"):
            gr.Markdown("""## 材质参考

# 天然材质
- 木质
- 大理石
- 象牙
- 骨头
- 丝绸
- 绒毛

# 金属材质  
- 金
- 银
- 铜
- 黑金
- 拉丝金属
- 精密图案金属

# 人造材质
- 塑料
- 水泥
- 漆面
- 纸质
- 粘土人偶
- 盔甲
- 机甲装甲

# 特殊材质
- 水晶
- 宝石
- 冰
- 干冰
- 雪花
- 岩浆
- 粘液
- 灰油
- 粉末

# 艺术材质
- 水晶
- 壁画
- 纹理装饰""")

        # 增强真实感参考
        with gr.Tab("增强真实感"):
            gr.Markdown("""## 真实感参考

# 渲染引擎与质量
- 虚幻引擎渲染
- OC渲染器
- 3D渲染
- Epic游戏质感
- 高动态光照渲染

# 画质与细节
- 4K/8K超高清画质
- 超真实效果
- 细节丰富
- 错综复杂的细节表现
- 空间反射效果

# 摄影与镜头
- 35mm镜头(可替换其他参数)
- 徕卡镜头(可选Canon/Nikon等)
- 商业摄影风格
- 电影感画面
- 真实生活场景

# 场景与应用
- 场景设计(建筑/风景)
- 写实风格壁纸
- 超写实表现
- 现实主义风格""")

    # 返回所有创建的组件，以便在主文件中使用
    return {
        "expression_template": expression_template,
        "story_template": story_template,
        "shot_template": shot_template,
        "poster_template": poster_template,
        "three_view_template": three_view_template
    }